sudo: false
language: python
env:
  - MOZ_HEADLESS=1

addons:
  firefox: "55.0"

python:
  - "3.6"
before_install:
  - wget https://github.com/mozilla/geckodriver/releases/download/v0.20.1/geckodriver-v0.20.1-linux64.tar.gz
  - tar -xzvf geckodriver-v0.20.1-linux64.tar.gz
  - sudo mv geckodriver /usr/local/bin
install:
  - "pip install -r requirements/dev.txt"
  - pip install coveralls==0.4.4
before_script:
  - export SECRET_KEY=foobarbaz
  - psql -c "CREATE DATABASE systersdb;" -U postgres
script:
  - coverage run systers_portal/manage.py test --settings=systers_portal.settings.testing
  - flake8 systers_portal
notifications:
  slack: '<account>:<token>#portal'
after_success:
  coveralls --rcfile=.coveragerc
